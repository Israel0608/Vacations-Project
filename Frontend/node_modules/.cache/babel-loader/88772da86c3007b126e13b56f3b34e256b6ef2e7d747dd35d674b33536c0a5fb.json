{"ast":null,"code":"var _jsxFileName = \"/Users/ysrlswpr/Desktop/Israel Sofer Project/Frontend/src/Components/DataArea/AddVacation/AddVacation.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useNavigate } from \"react-router-dom\";\nimport useImagePreview from \"../../../Utils/UseImagePreview\";\nimport \"./AddVacation.css\";\nimport notificationService from \"../../../Services/NotificationService\";\nimport dataService from \"../../../Services/DataService\";\nimport appConfig from \"../../../Utils/AppConfig\";\nimport { authStore } from \"../../../Redux/AuthState\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AddVacation() {\n  _s();\n  const {\n    register,\n    handleSubmit\n  } = useForm();\n  const navigate = useNavigate();\n  const [imageFile, setImageFile] = useState();\n  const imageSrc = useImagePreview(imageFile);\n  const [minDate, setMinDate] = useState('');\n  useEffect(() => {\n    if (!authStore.getState().token) {\n      notificationService.error(\"You must be logged in\");\n      navigate(appConfig.LoginRoute);\n      return;\n    }\n  }, []);\n  const isAdmin = true;\n  function handleFileChange(event) {\n    const files = event.target.files;\n    if (!files || !files.item(0)) return;\n    setImageFile(files.item(0));\n  }\n  async function send(vacation) {\n    try {\n      vacation.image = vacation.image[0];\n      await dataService.addVacation(vacation);\n      notificationService.success(\"Vacation has been added\");\n      navigate(appConfig.VacationsRoute);\n    } catch (err) {\n      notificationService.error(err);\n    }\n  }\n  if (!isAdmin) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"AddVacation\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit(send),\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"VacationDestination\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        ...register(\"vacationDestination\"),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Description\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        ...register(\"description\"),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"CheckIn\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        ...register(\"checkIn\", {\n          required: true\n        }),\n        min: new Date().toJSON().slice(0, 10),\n        onChange: e => {\n          setMinDate(e.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"CheckOut\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        ...register(\"checkOut\"),\n        min: minDate,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Price\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        max: \"10000\",\n        step: \"0.01\",\n        ...register(\"price\"),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"image-upload\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/*\",\n          ...register(\"image\"),\n          onChange: handleFileChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: imageSrc\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"Add\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n}\n_s(AddVacation, \"5eNWdudZYUPTw7a6HeV78TdE1Ug=\", false, function () {\n  return [useForm, useNavigate, useImagePreview];\n});\n_c = AddVacation;\nexport default AddVacation;\nvar _c;\n$RefreshReg$(_c, \"AddVacation\");","map":{"version":3,"names":["useEffect","useState","useForm","useNavigate","useImagePreview","notificationService","dataService","appConfig","authStore","jsxDEV","_jsxDEV","AddVacation","_s","register","handleSubmit","navigate","imageFile","setImageFile","imageSrc","minDate","setMinDate","getState","token","error","LoginRoute","isAdmin","handleFileChange","event","files","target","item","send","vacation","image","addVacation","success","VacationsRoute","err","className","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","type","required","min","Date","toJSON","slice","onChange","e","value","max","step","accept","src","_c","$RefreshReg$"],"sources":["/Users/ysrlswpr/Desktop/Israel Sofer Project/Frontend/src/Components/DataArea/AddVacation/AddVacation.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { NavLink, useNavigate } from \"react-router-dom\";\nimport useImagePreview from \"../../../Utils/UseImagePreview\";\nimport \"./AddVacation.css\";\nimport notificationService from \"../../../Services/NotificationService\";\nimport VacationsModel from \"../../../Models/vacations-model\";\nimport dataService from \"../../../Services/DataService\";\nimport appConfig from \"../../../Utils/AppConfig\";\nimport { authStore } from \"../../../Redux/AuthState\";\n\nfunction AddVacation(): JSX.Element {\n\n    const { register, handleSubmit } = useForm<VacationsModel>();\n    const navigate = useNavigate();\n    const [imageFile, setImageFile] = useState<File | null>();\n    const imageSrc = useImagePreview(imageFile);\n    const [minDate, setMinDate] = useState<string>('');\n\n    useEffect(() => {\n        if (!authStore.getState().token) {\n          notificationService.error(\"You must be logged in\");\n          navigate(appConfig.LoginRoute)\n          return;\n        }\n     }, [])\n\n    const isAdmin = true;\n\n    function handleFileChange(event: any) {\n        const files = event.target.files;\n        if (!files || !files.item(0)) return;\n        setImageFile(files.item(0));\n    }\n\n    async function send(vacation: VacationsModel) {\n        try {\n            vacation.image = (vacation.image as unknown as FileList)[0];\n            await dataService.addVacation(vacation);\n            notificationService.success(\"Vacation has been added\");\n            navigate(appConfig.VacationsRoute);\n        } catch (err: any) { notificationService.error(err); }\n    }\n\n    if (!isAdmin) {\n        return null;\n    }\n\n    return (\n        <div className=\"AddVacation\">\n            <form onSubmit={handleSubmit(send)}>\n                <label>VacationDestination</label>\n                <input type=\"text\" {...register(\"vacationDestination\")} required />\n\n                <label>Description</label>\n                <input type=\"text\" {...register(\"description\")} required />\n\n                <label>CheckIn</label>\n                <input type=\"date\" {...register(\"checkIn\", { required: true })} min={new Date().toJSON().slice(0, 10)}\n                    onChange={(e) => { setMinDate(e.target.value) }} />\n\n                <label>CheckOut</label>\n                <input type=\"date\"\n                    {...register(\"checkOut\")} min={minDate} required/>\n\n                <label>Price</label>\n                <input type=\"number\" max=\"10000\" step=\"0.01\" {...register(\"price\")} required />\n\n                <div className=\"image-upload\">\n                    <label>Image</label>\n                    <input type=\"file\" accept=\"image/*\" {...register(\"image\")} onChange={handleFileChange} required />\n                    <img src={imageSrc} />\n                </div>\n                <button>Add</button>\n            </form>\n\n        </div>\n    );\n}\n\nexport default AddVacation;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}